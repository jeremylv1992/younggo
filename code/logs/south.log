south execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL);" with params "[]"
south execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_2fd89c61` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL);" with params "[]"
south execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_2fd89c61` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL);" with params "[]"
south execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_2fd89c61` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL);" with params "[]"
south execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_2fd89c61` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL);" with params "[]"
south execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_2fd89c61` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL);" with params "[]"
south execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_2fd89c61` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL);" with params "[]"
south execute "CREATE TABLE `home_store` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `area_id` integer NOT NULL, `owner_id` integer NOT NULL, `name` varchar(100) NOT NULL);" with params "[]"
south execute "ALTER TABLE `home_store` ADD CONSTRAINT `area_id_refs_id_7fe11cc1` FOREIGN KEY (`area_id`) REFERENCES `home_school` (`id`);" with params "[]"
south execute "CREATE INDEX `home_store_202f16e9` ON `home_store` (`area_id`);" with params "[]"
south execute "ALTER TABLE `home_store` ADD CONSTRAINT `owner_id_refs_id_8791bbd` FOREIGN KEY (`owner_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "CREATE INDEX `home_store_5d52dd10` ON `home_store` (`owner_id`);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `home_store` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `area_id` integer NOT NULL, `owner_id` integer NOT NULL, `name` varchar(100) NOT NULL);" with params "[]"
south execute "ALTER TABLE `home_store` ADD CONSTRAINT `area_id_refs_id_7fe11cc1` FOREIGN KEY (`area_id`) REFERENCES `home_school` (`id`);" with params "[]"
south execute "CREATE INDEX `home_store_202f16e9` ON `home_store` (`area_id`);" with params "[]"
south execute "ALTER TABLE `home_store` ADD CONSTRAINT `owner_id_refs_id_8791bbd` FOREIGN KEY (`owner_id`) REFERENCES `auth_user` (`id`);" with params "[]"
south execute "CREATE INDEX `home_store_5d52dd10` ON `home_store` (`owner_id`);" with params "[]"
south execute "ALTER TABLE `home_store` ADD COLUMN `summary` varchar(200) NULL;" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "ALTER TABLE `home_store` ADD COLUMN `summary` varchar(200) NULL;" with params "[]"
south execute "ALTER TABLE `home_store` ;" with params "[]"
south execute "ALTER TABLE `home_store` MODIFY `summary` varchar(200) NULL;;" with params "[]"
south execute "ALTER TABLE `home_store` ALTER COLUMN `summary` DROP DEFAULT;" with params "[]"
south execute "ALTER TABLE `home_store` ADD COLUMN `created_time` datetime NOT NULL DEFAULT '2015-03-26 20:51:37.965000';" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "ALTER TABLE `home_store` ADD COLUMN `created_time` datetime NOT NULL DEFAULT '2015-03-26 20:51:37.965000';" with params "[]"
south execute "ALTER TABLE `home_store` ;" with params "[]"
south execute "ALTER TABLE `home_store` MODIFY `created_time` datetime NOT NULL;;" with params "[]"
south execute "ALTER TABLE `home_store` ALTER COLUMN `created_time` DROP DEFAULT;" with params "[]"
south execute "CREATE TABLE `home_good` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `store_id` integer NOT NULL, `name` varchar(100) NOT NULL, `options` longtext NOT NULL, `prices` longtext NOT NULL);" with params "[]"
south execute "ALTER TABLE `home_good` ADD CONSTRAINT `store_id_refs_id_5c69ec62` FOREIGN KEY (`store_id`) REFERENCES `home_store` (`id`);" with params "[]"
south execute "CREATE INDEX `home_good_47799232` ON `home_good` (`store_id`);" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "CREATE TABLE `home_good` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `store_id` integer NOT NULL, `name` varchar(100) NOT NULL, `options` longtext NOT NULL, `prices` longtext NOT NULL);" with params "[]"
south execute "ALTER TABLE `home_good` ADD CONSTRAINT `store_id_refs_id_5c69ec62` FOREIGN KEY (`store_id`) REFERENCES `home_store` (`id`);" with params "[]"
south execute "CREATE INDEX `home_good_47799232` ON `home_good` (`store_id`);" with params "[]"
south execute "ALTER TABLE `home_good` ADD COLUMN `go_online_time` datetime NOT NULL DEFAULT '2015-03-27 15:06:51.896000';" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "ALTER TABLE `home_good` ADD COLUMN `go_online_time` datetime NOT NULL DEFAULT '2015-03-27 15:06:51.896000';" with params "[]"
south execute "ALTER TABLE `home_good` ;" with params "[]"
south execute "ALTER TABLE `home_good` MODIFY `go_online_time` datetime NOT NULL;;" with params "[]"
south execute "ALTER TABLE `home_good` ALTER COLUMN `go_online_time` DROP DEFAULT;" with params "[]"
south execute "ALTER TABLE `home_good` ADD COLUMN `min_pirce` double precision NOT NULL DEFAULT 10;" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "ALTER TABLE `home_good` ADD COLUMN `min_pirce` double precision NOT NULL DEFAULT 10;" with params "[]"
south execute "ALTER TABLE `home_good` ;" with params "[]"
south execute "ALTER TABLE `home_good` MODIFY `min_pirce` double precision NOT NULL;;" with params "[]"
south execute "ALTER TABLE `home_good` ALTER COLUMN `min_pirce` DROP DEFAULT;" with params "[]"
south execute "ALTER TABLE `home_good` DROP COLUMN `min_pirce` CASCADE;" with params "[]"
south execute "ALTER TABLE `home_good` ADD COLUMN `min_price` double precision NOT NULL DEFAULT 10;" with params "[]"
south execute "SET FOREIGN_KEY_CHECKS=1;" with params "[]"
south execute "ALTER TABLE `home_good` DROP COLUMN `min_pirce` CASCADE;" with params "[]"
south execute "ALTER TABLE `home_good` ADD COLUMN `min_price` double precision NOT NULL DEFAULT 10;" with params "[]"
south execute "ALTER TABLE `home_good` ;" with params "[]"
south execute "ALTER TABLE `home_good` MODIFY `min_price` double precision NOT NULL;;" with params "[]"
south execute "ALTER TABLE `home_good` ALTER COLUMN `min_price` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL)" with params "[]"
execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_dc394e9c` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL)" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `home_store` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `area_id` integer NOT NULL, `owner_id` integer NOT NULL, `name` varchar(100) NOT NULL)" with params "[]"
execute "ALTER TABLE `home_store` ADD CONSTRAINT `area_id_refs_id_155e58e1` FOREIGN KEY (`area_id`) REFERENCES `home_school` (`id`);" with params "[]"
execute "CREATE INDEX `home_store_a4563695` ON `home_store` (`area_id`);" with params "[]"
execute "ALTER TABLE `home_store` ADD CONSTRAINT `owner_id_refs_id_5fbad0dd` FOREIGN KEY (`owner_id`) REFERENCES `auth_user` (`id`);" with params "[]"
execute "CREATE INDEX `home_store_cb902d83` ON `home_store` (`owner_id`);" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_store` ADD COLUMN `summary` varchar(200) NULL;" with params "[]"
execute "ALTER TABLE `home_store` ;" with params "[]"
execute "ALTER TABLE `home_store` MODIFY `summary` varchar(200) NULL;;" with params "[]"
execute "ALTER TABLE `home_store` ALTER COLUMN `summary` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_store` ADD COLUMN `created_time` datetime NOT NULL DEFAULT '2015-03-26 20:51:37';" with params "[]"
execute "ALTER TABLE `home_store` ;" with params "[]"
execute "ALTER TABLE `home_store` MODIFY `created_time` datetime NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_store` ALTER COLUMN `created_time` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `home_good` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `store_id` integer NOT NULL, `name` varchar(100) NOT NULL, `options` longtext NOT NULL, `prices` longtext NOT NULL)" with params "[]"
execute "ALTER TABLE `home_good` ADD CONSTRAINT `store_id_refs_id_7d398851` FOREIGN KEY (`store_id`) REFERENCES `home_store` (`id`);" with params "[]"
execute "CREATE INDEX `home_good_c25aaacd` ON `home_good` (`store_id`);" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_good` ADD COLUMN `go_online_time` datetime NOT NULL DEFAULT '2015-03-27 15:06:51';" with params "[]"
execute "ALTER TABLE `home_good` ;" with params "[]"
execute "ALTER TABLE `home_good` MODIFY `go_online_time` datetime NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_good` ALTER COLUMN `go_online_time` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_good` ADD COLUMN `min_pirce` double precision NOT NULL DEFAULT 10.0;" with params "[]"
execute "ALTER TABLE `home_good` ;" with params "[]"
execute "ALTER TABLE `home_good` MODIFY `min_pirce` double precision NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_good` ALTER COLUMN `min_pirce` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "
            SELECT kc.`constraint_name`, kc.`column_name`, kc.`table_name`,
                kc.`referenced_table_name`, kc.`referenced_column_name`
            FROM information_schema.key_column_usage AS kc
            WHERE
                kc.table_schema = %s
        " with params "['mysite']"
execute "
            SELECT c.constraint_name, c.table_name, c.constraint_type
            FROM information_schema.table_constraints AS c
            WHERE
                c.table_schema = %s
        " with params "['mysite']"
execute "ALTER TABLE `home_good` DROP COLUMN `min_pirce` CASCADE;" with params "[]"
execute "ALTER TABLE `home_good` ADD COLUMN `min_price` double precision NOT NULL DEFAULT 10.0;" with params "[]"
execute "ALTER TABLE `home_good` ;" with params "[]"
execute "ALTER TABLE `home_good` MODIFY `min_price` double precision NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_good` ALTER COLUMN `min_price` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `passport_userprofile` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL UNIQUE, `gender` varchar(1) NOT NULL)" with params "[]"
execute "ALTER TABLE `passport_userprofile` ADD CONSTRAINT `user_id_refs_id_dc394e9c` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `home_school` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL)" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `home_store` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `area_id` integer NOT NULL, `owner_id` integer NOT NULL, `name` varchar(100) NOT NULL)" with params "[]"
execute "ALTER TABLE `home_store` ADD CONSTRAINT `area_id_refs_id_155e58e1` FOREIGN KEY (`area_id`) REFERENCES `home_school` (`id`);" with params "[]"
execute "CREATE INDEX `home_store_a4563695` ON `home_store` (`area_id`);" with params "[]"
execute "ALTER TABLE `home_store` ADD CONSTRAINT `owner_id_refs_id_5fbad0dd` FOREIGN KEY (`owner_id`) REFERENCES `auth_user` (`id`);" with params "[]"
execute "CREATE INDEX `home_store_cb902d83` ON `home_store` (`owner_id`);" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_store` ADD COLUMN `summary` varchar(200) NULL;" with params "[]"
execute "ALTER TABLE `home_store` ;" with params "[]"
execute "ALTER TABLE `home_store` MODIFY `summary` varchar(200) NULL;;" with params "[]"
execute "ALTER TABLE `home_store` ALTER COLUMN `summary` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_store` ADD COLUMN `created_time` datetime NOT NULL DEFAULT '2015-03-26 20:51:37';" with params "[]"
execute "ALTER TABLE `home_store` ;" with params "[]"
execute "ALTER TABLE `home_store` MODIFY `created_time` datetime NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_store` ALTER COLUMN `created_time` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "CREATE TABLE `home_good` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `store_id` integer NOT NULL, `name` varchar(100) NOT NULL, `options` longtext NOT NULL, `prices` longtext NOT NULL)" with params "[]"
execute "ALTER TABLE `home_good` ADD CONSTRAINT `store_id_refs_id_7d398851` FOREIGN KEY (`store_id`) REFERENCES `home_store` (`id`);" with params "[]"
execute "CREATE INDEX `home_good_c25aaacd` ON `home_good` (`store_id`);" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_good` ADD COLUMN `go_online_time` datetime NOT NULL DEFAULT '2015-03-27 15:06:51';" with params "[]"
execute "ALTER TABLE `home_good` ;" with params "[]"
execute "ALTER TABLE `home_good` MODIFY `go_online_time` datetime NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_good` ALTER COLUMN `go_online_time` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "ALTER TABLE `home_good` ADD COLUMN `min_pirce` double precision NOT NULL DEFAULT 10.0;" with params "[]"
execute "ALTER TABLE `home_good` ;" with params "[]"
execute "ALTER TABLE `home_good` MODIFY `min_pirce` double precision NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_good` ALTER COLUMN `min_pirce` DROP DEFAULT;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "
            SELECT kc.`constraint_name`, kc.`column_name`, kc.`table_name`,
                kc.`referenced_table_name`, kc.`referenced_column_name`
            FROM information_schema.key_column_usage AS kc
            WHERE
                kc.table_schema = %s
        " with params "['mysite']"
execute "
            SELECT c.constraint_name, c.table_name, c.constraint_type
            FROM information_schema.table_constraints AS c
            WHERE
                c.table_schema = %s
        " with params "['mysite']"
execute "ALTER TABLE `home_good` DROP COLUMN `min_pirce` CASCADE;" with params "[]"
execute "ALTER TABLE `home_good` ADD COLUMN `min_price` double precision NOT NULL DEFAULT 10.0;" with params "[]"
execute "ALTER TABLE `home_good` ;" with params "[]"
execute "ALTER TABLE `home_good` MODIFY `min_price` double precision NOT NULL;;" with params "[]"
execute "ALTER TABLE `home_good` ALTER COLUMN `min_price` DROP DEFAULT;" with params "[]"
